=======================
Localrec Scipion plugin
=======================

Cryogenic electron microscopy (cryoEM) can yield near-atomic resolution structures of highly ordered macromolecular complexes. Often however some subunits bind in a flexible manner, have different symmetry from the rest of the complex, or are present in sub-stoichiometric amounts, limiting the attainable resolution. We have developed a general method for the localized three-dimensional reconstruction of such subunits earlier (Ilca et al 2015 Nature Commun).

In this project we implement Localized Reconstruction as a plugin (Locarec) for Scipion.

If Localized Reconstruction is useful in your work, please cite:

Ilca SL, Kotecha A, Sun X, Poranen MM, Stuart DI & Huiskonen JT (2015). Localized reconstruction of subunits from electron cryomicroscopy images of macromolecular complexes. Nat Commun 6, 8843. doi:10.1038/ncomms9843

Abrishami V, Ilca SL, Gomez-Blanco J, Rissanen I, de la Rosa-Trevín JM, Reddy VS, Carazo JM, Huiskonen JT (2020). Localized reconstruction in Scipion expedites the analysis of symmetry mismatches in cryo-EM data. Prog. Biophys. Mol. Biol. doi:10.1016/j.pbiomolbio.2020.05.004.

===================
Install this plugin
===================

You will need to use `3.0.0 <https://scipion-em.github.io/docs/release-3.0.0/docs/scipion-modes/how-to-install.html>`_ version of Scipion or later to run these protocols.

**Stable version**  

Either use the following command

.. code-block::

    scipion3 installp -p scipion-em-localrec

or

Install plugin through the plugin manager GUI by launching Scipion and following **Configuration** >> **Plugins**

**Developer's version** 

1. Download repository: 

.. code-block::

            git clone https://github.com/scipion-em/scipion-em-localrec.git

2. Install:

.. code-block::

           scipion3 installp -p path_to_scipion-em-localrec --devel

3. Test the plugin:

.. code-block::

           scipion3 test localrec.tests.test_protocol_localized_reconstruction

=========
Protocols
=========

The following protocols have been implemented so far

* localrec - define subparticles: Determines the coordinates, orientations and defocus values of the sub-particles.
* localrec - filter subparticles: Excludes unwanted sub-particles based on alignment information.
* localrec - extract subparticles: Extracts sub-particle images from each particle image.
* localrec - set origin to subvolume: Fits a sub-volume back to it's original volume (larger volume).
* localrec - particles subset by subparticles: makes a subset of particles for which there is at least one sub-particle.
* localrec - stitch subvolumes: Assembles a full volume from the sub-volumes generated by localized reconstruction.

=====
Tests
=====

* scipion test localrec.tests.test_protocol_localized_reconstruction

===============
Buildbot status
===============
Status devel version: 

.. image:: http://scipion-test.cnb.csic.es:9980/badges/localrec_devel.svg

Status production version: 

.. image:: http://scipion-test.cnb.csic.es:9980/badges/localrec_prod.svg


================
Acknowledgements
================

The authors acknowledge funding from the European Research Council under the European Union’s Horizon 2020 research and innovation programme (649053).
